stage('Run Local in Docker') {
  steps {
    echo "ðŸ§© Iniciando ${SERVICE} en red local (${NET}) para pruebas internas..."
    sh """
      # Crear red si no existe
      docker network inspect ${NET} >/dev/null 2>&1 || docker network create ${NET}

      # Detener y eliminar contenedor previo si existe
      docker rm -f ${SERVICE} >/dev/null 2>&1 || true

      # Ejecutar contenedor en red local
      docker run -d \
        --name ${SERVICE} \
        --network ${NET} \
        -p ${HOST}:${PORT} \
        -e SPRING_PROFILES_ACTIVE=dev \
        -e SERVER_PORT=${PORT} \
        ${IMAGE}

      echo "âœ… ${SERVICE} levantado localmente en http://localhost:${HOST}"
    """
  }
}
